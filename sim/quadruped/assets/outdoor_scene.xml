<?xml version="1.0" encoding="utf-8"?>
<!--
Outdoor Orchard/Park Scene for Go2 Quadruped Demo

A lush outdoor environment with:
- Grass-textured terrain with gentle height variation
- Multiple trees with trunks and canopy
- Natural lighting (sun + ambient)
- Waypoint markers for navigation tasks

Designed for high-resolution rendering with Cosmos-Predict2.5.
-->
<mujoco model="go2_outdoor">
  <!-- meshdir points to go2/assets where the .obj files live -->
  <compiler angle="radian" meshdir="go2/assets" autolimits="true"/>

  <include file="go2/go2.xml"/>

  <option timestep="0.002" gravity="0 0 -9.81" integrator="implicitfast">
    <flag contact="enable"/>
  </option>

  <statistic center="0 0 0.5" extent="6"/>

  <visual>
    <headlight diffuse="0.3 0.3 0.3" ambient="0.2 0.2 0.2" specular="0.1 0.1 0.1"/>
    <rgba haze="0.35 0.45 0.35 1"/>
    <quality shadowsize="4096"/>
    <map znear="0.01" zfar="100" haze="0.3"/>
    <global azimuth="-140" elevation="-25" offwidth="1920" offheight="1080"/>
  </visual>

  <asset>
    <!-- Sky -->
    <texture type="skybox" builtin="gradient" rgb1="0.45 0.60 0.80" rgb2="0.75 0.85 0.95"
      width="512" height="3072"/>

    <!-- Grass ground -->
    <texture name="grass_tex" type="2d" builtin="flat" rgb1="0.28 0.49 0.20" rgb2="0.22 0.42 0.16"
      width="512" height="512" mark="random" markrgb="0.32 0.55 0.24" random="0.05"/>
    <material name="grass_mat" texture="grass_tex" texrepeat="30 30" texuniform="false"
      reflectance="0.05" rgba="1 1 1 1"/>

    <!-- Dirt path -->
    <texture name="dirt_tex" type="2d" builtin="flat" rgb1="0.50 0.40 0.30" rgb2="0.45 0.36 0.28"
      width="256" height="256" mark="random" markrgb="0.55 0.45 0.35" random="0.08"/>
    <material name="dirt_mat" texture="dirt_tex" texrepeat="8 8" reflectance="0.02"/>

    <!-- Tree bark -->
    <texture name="bark_tex" type="2d" builtin="flat" rgb1="0.30 0.22 0.14" rgb2="0.25 0.18 0.12"
      width="128" height="128" mark="random" markrgb="0.35 0.25 0.16" random="0.1"/>
    <material name="bark_mat" texture="bark_tex" texrepeat="2 4" reflectance="0.03"/>

    <!-- Leaves / canopy -->
    <texture name="leaf_tex" type="2d" builtin="flat" rgb1="0.22 0.45 0.15" rgb2="0.18 0.38 0.12"
      width="256" height="256" mark="random" markrgb="0.28 0.52 0.20" random="0.15"/>
    <material name="leaf_mat" texture="leaf_tex" texrepeat="3 3" reflectance="0.08"
      rgba="0.30 0.55 0.22 0.92"/>

    <!-- Goal/waypoint marker -->
    <material name="marker_mat" rgba="0.9 0.25 0.15 0.8" reflectance="0.3" shininess="0.5"/>
    <material name="marker_glow_mat" rgba="1.0 0.6 0.2 0.4" reflectance="0.1"/>
  </asset>

  <worldbody>
    <!-- ============== LIGHTING ============== -->
    <!-- Sun - warm directional light -->
    <light name="sun" pos="5 -3 8" dir="-0.4 0.3 -0.8" diffuse="1.0 0.95 0.85"
      specular="0.4 0.38 0.35" directional="true" castshadow="true"/>
    <!-- Ambient fill -->
    <light name="fill" pos="-3 4 5" dir="0.3 -0.3 -0.7" diffuse="0.25 0.30 0.35"
      specular="0.05 0.05 0.05" directional="true" castshadow="false"/>

    <!-- ============== TERRAIN ============== -->
    <!-- Main grass ground plane -->
    <geom name="ground" type="plane" size="15 15 0.5" material="grass_mat"
      friction="1.0 0.005 0.0001" pos="0 0 0"/>

    <!-- Dirt path - winding through the scene -->
    <geom name="path_1" type="box" pos="0 0 0.002" size="8 0.35 0.002" material="dirt_mat"
      euler="0 0 0.15" contype="1" conaffinity="1" friction="0.8 0.005 0.0001"/>
    <geom name="path_2" type="box" pos="2 2 0.002" size="5 0.30 0.002" material="dirt_mat"
      euler="0 0 0.6" contype="1" conaffinity="1" friction="0.8 0.005 0.0001"/>
    <geom name="path_3" type="box" pos="-1 -2 0.002" size="4 0.28 0.002" material="dirt_mat"
      euler="0 0 -0.4" contype="1" conaffinity="1" friction="0.8 0.005 0.0001"/>

    <!-- ============== TREES ============== -->
    <!-- Each tree: trunk (cylinder) + canopy (ellipsoid/sphere) -->

    <!-- Tree 1 - Large, right side -->
    <body name="tree_1" pos="3.0 1.5 0">
      <geom name="trunk_1" type="cylinder" size="0.12 0.9" pos="0 0 0.9"
        material="bark_mat" contype="1" conaffinity="1"/>
      <geom name="trunk_1b" type="cylinder" size="0.08 0.4" pos="0.15 0 1.8"
        euler="0 0.3 0" material="bark_mat" contype="0" conaffinity="0"/>
      <geom name="trunk_1c" type="cylinder" size="0.06 0.3" pos="-0.1 0.08 1.7"
        euler="0.2 -0.4 0" material="bark_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_1a" type="ellipsoid" size="1.2 1.0 0.8" pos="0 0 2.4"
        material="leaf_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_1b" type="ellipsoid" size="0.8 0.9 0.6" pos="0.5 0.3 2.8"
        material="leaf_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_1c" type="ellipsoid" size="0.7 0.6 0.5" pos="-0.3 -0.2 2.6"
        material="leaf_mat" contype="0" conaffinity="0"/>
    </body>

    <!-- Tree 2 - Medium, left side -->
    <body name="tree_2" pos="-2.5 2.0 0">
      <geom name="trunk_2" type="cylinder" size="0.10 0.75" pos="0 0 0.75"
        material="bark_mat" contype="1" conaffinity="1"/>
      <geom name="trunk_2b" type="cylinder" size="0.06 0.3" pos="0.08 -0.05 1.5"
        euler="0 0.25 0.5" material="bark_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_2a" type="ellipsoid" size="1.0 0.9 0.7" pos="0 0 2.0"
        material="leaf_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_2b" type="ellipsoid" size="0.6 0.7 0.5" pos="0.3 0.2 2.3"
        material="leaf_mat" contype="0" conaffinity="0"/>
    </body>

    <!-- Tree 3 - Far background -->
    <body name="tree_3" pos="1.0 -3.5 0">
      <geom name="trunk_3" type="cylinder" size="0.14 1.0" pos="0 0 1.0"
        material="bark_mat" contype="1" conaffinity="1"/>
      <geom name="trunk_3b" type="cylinder" size="0.07 0.35" pos="-0.12 0 1.9"
        euler="0.15 -0.3 0" material="bark_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_3a" type="ellipsoid" size="1.3 1.1 0.9" pos="0 0 2.7"
        material="leaf_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_3b" type="ellipsoid" size="0.9 0.8 0.6" pos="-0.4 0.3 3.0"
        material="leaf_mat" contype="0" conaffinity="0"/>
    </body>

    <!-- Tree 4 - Near left -->
    <body name="tree_4" pos="-3.8 -1.0 0">
      <geom name="trunk_4" type="cylinder" size="0.09 0.65" pos="0 0 0.65"
        material="bark_mat" contype="1" conaffinity="1"/>
      <geom name="canopy_4a" type="ellipsoid" size="0.8 0.8 0.6" pos="0 0 1.7"
        material="leaf_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_4b" type="ellipsoid" size="0.5 0.6 0.4" pos="0.2 -0.1 1.9"
        material="leaf_mat" contype="0" conaffinity="0"/>
    </body>

    <!-- Tree 5 - Far right background -->
    <body name="tree_5" pos="5.0 -1.5 0">
      <geom name="trunk_5" type="cylinder" size="0.11 0.85" pos="0 0 0.85"
        material="bark_mat" contype="1" conaffinity="1"/>
      <geom name="trunk_5b" type="cylinder" size="0.07 0.4" pos="0.1 0.1 1.7"
        euler="0.1 0.2 0.3" material="bark_mat" contype="0" conaffinity="0"/>
      <geom name="canopy_5a" type="ellipsoid" size="1.1 1.0 0.75" pos="0 0 2.3"
        material="leaf_mat" contype="0" conaffinity="0"/>
    </body>

    <!-- Tree 6 - Background cluster -->
    <body name="tree_6" pos="-1.0 4.5 0">
      <geom name="trunk_6" type="cylinder" size="0.13 0.95" pos="0 0 0.95"
        material="bark_mat" contype="1" conaffinity="1"/>
      <geom name="canopy_6a" type="ellipsoid" size="1.2 1.0 0.8" pos="0 0 2.5"
        material="leaf_mat" contype="0" conaffinity="0"/>
    </body>

    <!-- Tree 7 - Near the robot start area -->
    <body name="tree_7" pos="1.8 3.2 0">
      <geom name="trunk_7" type="cylinder" size="0.10 0.7" pos="0 0 0.7"
        material="bark_mat" contype="1" conaffinity="1"/>
      <geom name="canopy_7a" type="ellipsoid" size="0.9 0.85 0.6" pos="0 0 1.8"
        material="leaf_mat" contype="0" conaffinity="0"/>
    </body>

    <!-- ============== WAYPOINT MARKERS ============== -->
    <!-- These can be repositioned programmatically for different tasks -->
    <body name="waypoint_A" pos="2.5 0.5 0">
      <geom name="wp_a_ring" type="cylinder" size="0.2 0.005" pos="0 0 0.01"
        material="marker_mat" contype="0" conaffinity="0"/>
      <geom name="wp_a_glow" type="cylinder" size="0.25 0.003" pos="0 0 0.005"
        material="marker_glow_mat" contype="0" conaffinity="0"/>
      <geom name="wp_a_center" type="sphere" size="0.04" pos="0 0 0.06"
        material="marker_mat" contype="0" conaffinity="0"/>
    </body>

    <body name="waypoint_B" pos="-2.0 -1.5 0">
      <geom name="wp_b_ring" type="cylinder" size="0.2 0.005" pos="0 0 0.01"
        rgba="0.2 0.5 0.9 0.8" contype="0" conaffinity="0"/>
      <geom name="wp_b_glow" type="cylinder" size="0.25 0.003" pos="0 0 0.005"
        rgba="0.3 0.6 1.0 0.4" contype="0" conaffinity="0"/>
      <geom name="wp_b_center" type="sphere" size="0.04" pos="0 0 0.06"
        rgba="0.2 0.5 0.9 0.9" contype="0" conaffinity="0"/>
    </body>

    <!-- ============== SMALL OBJECTS ============== -->
    <!-- Ball for "fetch" tasks -->
    <body name="ball" pos="2.0 -0.5 0.08">
      <freejoint name="ball_joint"/>
      <geom name="ball_geom" type="sphere" size="0.06" mass="0.1"
        rgba="0.95 0.3 0.15 1" friction="0.8 0.02 0.01"/>
    </body>
  </worldbody>

  <sensor>
    <!-- Robot base sensors -->
    <framepos name="base_pos" objtype="body" objname="base"/>
    <framequat name="base_quat" objtype="body" objname="base"/>
    <framelinvel name="base_linvel" objtype="body" objname="base"/>
    <frameangvel name="base_angvel" objtype="body" objname="base"/>
    <!-- Foot contact sensors -->
    <touch name="FL_foot_touch" site="imu"/>
  </sensor>
</mujoco>
